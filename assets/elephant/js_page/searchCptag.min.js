	
	var h = 0;
	var m = 0;
	var s = 0;
	var t = 1;
	var rn = 1;
	var myTimer;
	//myTimer;
$(document).ready(function()
{
	var data_cur;
	$('#comBnt-sea').click(function(){

		let date1 = $('#com-date1').val();
		let date2 = $('#com-date2').val();
		//var table_cm = $('#demo-datatables-com').DataTable();
		 h = 0;
		 m = 0;
		 s = 0;
		 rn = 1;
		$('#tm_mer').html('กรุณา รอสักครู่...') 

		over_on();		
		//return 0;
		tableView_compare(date1, date2)


		console.clear();
		//table_cm.clear().draw();
		//console.log( table_cm.find("tr:eq(0)").find("td:eq(1)").text() );
		 
		//console.log( table_cm.rows().data()[0][0]);

    });		
    $('#exc-com').click(function()
    {
    	over_on();
		var style_excel = [];
		
		
    	console.log(data_cur);
                $.ajax({
                url     : 'http://192.168.161.102/report_access/sep_ship/ajax_excel',
                type    : 'post',
                dataType: 'text',
                data    :  { "parm1" : JSON.stringify(data_cur)  } ,
                success : function(it)
                            {
                                 console.log('http://192.168.161.102/report_access/' + it);
                                 window.location.href = 'http://192.168.161.102/report_access/' +it;

                                 over_off();
                            },
                error : function(it)
                    {
                        console.log(it);   
                    }
                });  
    });
    $('#csv-com').click(function()
    {
    	over_on();
                $.ajax({
                url     : 'http://192.168.161.102/report_access/sep_ship/ajax_csv',
                type    : 'post',
                dataType: 'text',
                data    :  { "parm1" : JSON.stringify(data_cur)  } ,
                success : function(it)
                            {
                                 console.log('http://192.168.161.102/report_access/' + it);
                                 window.location.href = 'http://192.168.161.102/report_access/' +it;

                                over_off();
                            },
                error : function(it)
                    {
                        console.log(it);   
                    }
                });  
	});	

	

function timeLoad()
{
	s++;			
	if(s == 60) {m++; s=0;}
	if(m == 60) {h++; m=0;}
					
	$('#tm_mer').html( h.toString().padStart(2, '0') + ':' + m.toString().padStart(2, '0') + ':' + s.toString().padStart(2, '0')  );
	console.log( h.toString().padStart(2, '0') + ':' + m.toString().padStart(2, '0') + ':' + s.toString().padStart(2, '0')  );


	myTimer =  setTimeout(timeLoad, 1000);
	//if (t == 0 ) clearInterval(myTimer);
	//if (rn == 1) {rn=0; ; }
}
function tableView_compare(date1, date2)
{
				//$('#demo-datatables-com tbody').html('');
                $.ajax({
                url     : 'http://192.168.161.102/report_access/sep_ship/get_detail_scan_compare',
                type    : 'post',
                dataType: 'json',
                data    :  { "parm1" : date1, "parm2" : date2  } ,
                success : function(cp)
                            {
                               data_cur = cp;	
                               bootstrapTableSimpleExample(cp);

                               $('#exp-com button').attr("disabled", false)

                               
                               $('#vCom-table').attr("hidden", false);
                                
                            },
                error : function(it)
                    {
                        console.log(it);   
                    }
                });  

}	

  function bootstrapTableSimpleExample(dataset) {

    var datatables = $('#demo-datatables-com');
    var oor = datatables.DataTable({
      dom: "<'row'<'col-sm-6'l><'col-sm-6'f>>" + "<'table-responsive'tr>" + "<'row'<'col-sm-12'p>>",          
      language: {
      paginate: {
          previous: '&laquo;',
          next: '&raquo;'
        },
        search: "_INPUT_",
        searchPlaceholder: "Search…"
      },
      "pagingType": "full_numbers",
       order: [[1, "desc"]],
       "lengthMenu": [[25, 50, 100, -1], [25, 50, 100, "All"]]

    });
    oor.clear().draw();

    for(var cm in dataset)
    {
       oor.row.add( [
	 	 	  		dataset[cm]["TERM_NO"],
		    		dataset[cm]["EXEC_DATE"],
		    		dataset[cm]["ITEM_CD"],
		    		dataset[cm]["DATA1"],
		    		dataset[cm]["DATA2"]
        ] ).draw( true );	

    }
     over_off();
  }
  function exportCompareTage(dataset) {





    
  }
	

function over_on() {
		$('#com-sea').css("display", "none");
		$('#com-wai').show();

		$('#myNav').css("width", "100%");
		$('#myNav').show();

		//timeLoad() ;
		//myTimer = mTimer;
}

function over_off() {
		//alert('Asynconice');
		//window.clearInterval(myTimer);
		//clearTimeout(myTimer);
		 t = 0;
		 h = 0;
		 m = 0;
		 s = 0;	

		//$('#tm_mer').html('00:00:00') 	
		$('#com-wai').css("display", "none");
		$('#com-sea').show();

		$('#myNav').css("width", "0");
		$('#myNav').hide();
		

}
});	